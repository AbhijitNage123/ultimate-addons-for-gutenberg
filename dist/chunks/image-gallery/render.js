(window.webpackJsonp_ultimate_addons_for_gutenberg=window.webpackJsonp_ultimate_addons_for_gutenberg||[]).push([[68],{454:function(e,a,t){"use strict";var l=t(17),r=t.n(l)()((function(e){return e[1]}));r.push([e.i,"/**\n * Editor styles for the admin\n */\n.uag-image-gallery-init-wrapper {\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  justify-content: center;\n  background-color: #f5f5f5;\n  padding: 2rem;\n  width: 100%; }\n  .uag-image-gallery-init-wrapper .components-input-control__container {\n    box-sizing: border-box;\n    margin: 0;\n    font-weight: var(--heading-weight-500);\n    border: 1px solid #ddd;\n    min-height: 100%;\n    font-size: 13px;\n    line-height: 1.25em;\n    border-radius: 4px; }\n    .uag-image-gallery-init-wrapper .components-input-control__container:focus {\n      box-shadow: none;\n      border-color: #aaa;\n      color: #444; }\n    .uag-image-gallery-init-wrapper .components-input-control__container:hover {\n      color: #444; }\n  .uag-image-gallery-init-wrapper svg {\n    width: 3em;\n    height: 3em; }\n",""]),a.a=r},510:function(e,a,t){"use strict";t.r(a);var l=t(3),r=t.n(l),i=t(0),n=t.n(i),g=t(1),o=t(6),c=t(4),s=t(7),u=e=>{let{attributes:a,setAttributes:t}=e;const{mediaGallery:l,mediaIDs:r}=a;return"inapplicable"!==t&&n.a.createElement("div",{className:"uag-image-gallery-init-wrapper"},s.a.image_gallery,n.a.createElement("h3",null,Object(g.__)("Spectra - Image Gallery","ultimate-addons-for-gutenberg")),n.a.createElement("p",null,Object(g.__)("Select your images and you're all good to go!","ultimate-addons-for-gutenberg")),n.a.createElement(c.MediaUpload,{title:Object(g.__)("Select Images","ultimate-addons-for-gutenberg"),onSelect:e=>{let a=!0,l=[],r=[];e.forEach(e=>{e&&e.url&&e.type&&"image"===e.type?(l.push(e.id),r[e.id]=!1):a=!1}),a&&t({mediaGallery:e,mediaIDs:l,focusList:r,readyToRender:!0})},allowedTypes:["image"],multiple:!0,value:r,gallery:!0,render:e=>{var a;let{open:t}=e;return n.a.createElement(o.Button,{isSecondary:!0,onClick:t},null!==(a=l[0])&&void 0!==a&&a.url?Object(g.__)("Replace Images","ultimate-addons-for-gutenberg"):Object(g.__)("Select Images","ultimate-addons-for-gutenberg"))}}))},m=t(30),d=t(243),p=t.n(d),b=t(431),y=t.n(b),_=t(447),h=t.n(_);function f(){return(f=Object.assign||function(e){for(var a=1;a<arguments.length;a++){var t=arguments[a];for(var l in t)Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l])}return e}).apply(this,arguments)}var w,v=e=>{let{attributes:a,setAttributes:t,block_id:l}=e;const{tileSize:o,focusList:c,mediaGallery:u,feedLayout:d,useLightbox:b,imageDisplayCaption:_,feedMarginTop:w,feedMarginRight:v,feedMarginBottom:E,feedMarginLeft:N,feedMarginTopTab:M,feedMarginRightTab:O,feedMarginBottomTab:k,feedMarginLeftTab:j,feedMarginTopMob:x,feedMarginRightMob:L,feedMarginBottomMob:S,feedMarginLeftMob:T,feedMarginUnit:I,feedMarginUnitTab:$,feedMarginUnitMob:A,gridImageGap:C,gridImageGapTab:H,gridImageGapMob:z,gridImageGapUnit:P,gridImageGapUnitTab:R,gridImageGapUnitMob:V,imageCaptionLength:G,captionDisplayType:U,imageCaptionAlignment:D,imageDefaultCaption:B,imageDefaultCaptionClickable:F,carouselStartAt:J,carouselLoop:W,carouselAutoplay:q,carouselAutoplaySpeed:K,carouselPauseOnHover:Q,carouselTransitionSpeed:X,gridPages:Y,gridPageNumber:Z,generateSpecialTiles:ee,feedPagination:ae,paginateUseArrows:te,paginateUseDots:le,paginateUseLoader:re,paginateLimit:ie,paginateButtonText:ne,columnsDesk:ge,columnsTab:oe,columnsMob:ce}=a,se=ae&&("grid"===d||"masonry"===d),[ue,me]=Object(i.useState)(0),[de,pe]=Object(i.useState)(!1),be=Object(i.useRef)(null),ye=Object(i.useRef)(null),_e=Object(i.useRef)(null),he=Object(i.useRef)(null),fe=Object(i.useRef)([]);Object(i.useEffect)(()=>{u.length<ge&&t({columnsDesk:u.length}),u.length<oe&&t({columnsTab:u.length}),u.length<ce&&t({columnsMob:u.length}),u&&le&&"carousel"===d?me(u.length>ge?be.current.children[0].querySelector(".slick-dots").clientHeight:0):"tiled"===d&&u.forEach(e=>{void 0!==fe.current[e.id]&&null!==fe.current[e.id]&&c[e.id]&&!fe.current[e.id].classList.contains("uag-image-gallery-media-wrapper--focus")&&fe.current[e.id].classList.add("uag-image-gallery-media-wrapper--focus")})},[JSON.stringify(u)]),Object(i.useEffect)(()=>{setTimeout(()=>{switch(d){case"tiled":const e=ye.current.querySelector(".uag-image-gallery__layout--tiled");t({tileSize:_e.current.getBoundingClientRect().width}),he.current=new h.a(e,{itemSelector:".uag-image-gallery-media-wrapper",layoutMode:"masonry",masonry:{columnWidth:".uag-image-gallery-media-spacer"}}),imagesLoaded(e).on("progress",(e,a)=>{ee&&a.isLoaded&&(Me(a.img),he.current.layout())});break;default:he.current&&he.current.destroy()}},50)},[JSON.stringify(u),d,ee,ge,oe,ce,w,v,E,N,M,O,k,j,x,L,S,T,I,$,A,C,H,z,P,R,V]),Object(i.useEffect)(()=>{if("tiled"===d)if(pe(!0),b)for(let e=0;e<fe.current.length;e++)void 0!==fe.current[e]&&null!==fe.current[e]&&fe.current[e].classList.add("uag-image-gallery-media--clickable");else for(let e=0;e<fe.current.length;e++)void 0!==fe.current[e]&&null!==fe.current[e]&&fe.current[e].classList.remove("uag-image-gallery-media--clickable")},[b,d]),Object(i.useEffect)(()=>{if(de){for(let e=0;e<c.length;e++)void 0!==c[e]&&void 0!==fe.current[e]&&null!==fe.current[e]&&(c[e]?fe.current[e].classList.add("uag-image-gallery-media-wrapper--focus"):fe.current[e].classList.remove("uag-image-gallery-media-wrapper--focus"));he.current&&he.current.layout(),pe(!1)}},[de]);const we=()=>n.a.createElement("button",{type:"button","data-role":"none",className:r()("uag-image-gallery__control-arrows","uag-image-gallery__control-arrows--"+d,{"slick-next":"carousel"===d||"tiled"===d,"slick-arrow":"carousel"===d||"tiled"===d}),"aria-label":"Next",tabIndex:"0","data-direction":"Next",onClick:()=>"grid"===d?t({gridPageNumber:Z+1}):"",disabled:"grid"===d&&Z===Y},s.a.carousel_right),ve=()=>n.a.createElement("button",{type:"button","data-role":"none",className:r()("uag-image-gallery__control-arrows","uag-image-gallery__control-arrows--"+d,{"slick-prev":"carousel"===d,"slick-arrow":"carousel"===d}),"aria-label":"Prev",tabIndex:"0","data-direction":"Prev",onClick:()=>"grid"===d?t({gridPageNumber:Z-1}):"",disabled:"grid"===d&&1===Z},s.a.carousel_left),Ee={arrows:te,dots:le,initialSlide:J,infinite:W,autoplay:q,autoplaySpeed:K,pauseOnHover:Q,speed:X,slidesToShow:ge,nextArrow:n.a.createElement(we,null),prevArrow:n.a.createElement(ve,null),responsive:[{breakpoint:1024,settings:{slidesToShow:oe}},{breakpoint:767,settings:{slidesToShow:ce}}]},Ne=(e,a)=>{let l=c;l[e.id]=a,t({focusList:l}),pe(!0)},Me=e=>{e.naturalWidth>=2*e.naturalHeight-e.naturalHeight/2?(e.parentElement.parentElement.classList.add("uag-image-gallery-media-wrapper--wide"),e.parentElement.classList.add("uag-image-gallery-media--tiled-wide")):e.naturalHeight>=2*e.naturalWidth-e.naturalWidth/2&&(e.parentElement.parentElement.classList.add("uag-image-gallery-media-wrapper--tall"),e.parentElement.classList.add("uag-image-gallery-media--tiled-tall"))},Oe=()=>(se&&t({gridPages:Math.ceil(u.length/ie)}),(se?u.slice((Z-1)*ie,Z*ie):u).map(e=>ke(e))),ke=e=>n.a.createElement("div",{className:r()("uag-image-gallery-media-wrapper",{"uag-image-gallery-media--clickable":"tiled"!==d&&b}),key:e.id,ref:a=>fe.current[e.id]=a},je(e),"tiled"===d&&(e=>{return c[e.id]?(a=e,n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"37 0.083 24 24",className:"uag-image-gallery__control-focus",onClick:()=>Ne(a,!1)},n.a.createElement("path",{d:"M45.791,10.375c1.1,0,2-0.9,2-2V4h-1.5v4.375c0,0.3-0.2,0.5-0.5,0.5h-4.376v1.5H45.791z"}),n.a.createElement("path",{d:"M51.041,8.376c0,1.1,0.9,2,2,2h4.375v-1.5h-4.375c-0.299,0-0.5-0.2-0.5-0.5V4h-1.5V8.376z"}),n.a.createElement("path",{d:"M45.791,13.625c1.1,0,2,0.9,2,2V20h-1.5v-4.375c0-0.3-0.2-0.5-0.5-0.5h-4.376v-1.5H45.791z"}),n.a.createElement("path",{d:"M51.041,15.625c0-1.1,0.9-2,2-2h4.375v1.5h-4.375c-0.299,0-0.5,0.199-0.5,0.5V20h-1.5V15.625z"}))):(e=>n.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",className:"uag-image-gallery__control-focus",onClick:()=>Ne(e,!0)},n.a.createElement("path",{d:"M6,4C4.9,4,4,4.9,4,6v4.375h1.5V6c0-0.3,0.2-0.5,0.5-0.5h4.376V4H6z"}),n.a.createElement("path",{d:"M20,6c0-1.1-0.9-2-2-2h-4.375v1.5H18c0.299,0,0.5,0.2,0.5,0.5v4.376H20V6z"}),n.a.createElement("path",{d:"M6,20c-1.1,0-2-0.9-2-2v-4.375h1.5V18c0,0.3,0.2,0.5,0.5,0.5h4.376V20H6z"}),n.a.createElement("path",{d:"M20,18c0,1.1-0.9,2-2,2h-4.375v-1.5H18c0.299,0,0.5-0.199,0.5-0.5v-4.375H20V18z"})))(e);var a})(e)),je=e=>n.a.createElement(n.a.Fragment,null,"bar-outside"===U&&"top"===Object(m.a)(D,1)&&_&&n.a.createElement("div",{className:r()("uag-image-gallery-media__thumbnail-caption-wrapper","uag-image-gallery-media__thumbnail-caption-wrapper--"+U)},xe(e)),n.a.createElement("div",{className:r()("uag-image-gallery-media","uag-image-gallery-media--"+d)},n.a.createElement("img",{className:r()("uag-image-gallery-media__thumbnail","uag-image-gallery-media__thumbnail--"+d),src:e.url}),n.a.createElement("div",{className:"uag-image-gallery-media__thumbnail-blurrer"}),_?"bar-outside"!==U&&n.a.createElement("div",{className:r()("uag-image-gallery-media__thumbnail-caption-wrapper","uag-image-gallery-media__thumbnail-caption-wrapper--"+U)},xe(e)):n.a.createElement("div",{className:r()("uag-image-gallery-media__thumbnail-caption-wrapper","uag-image-gallery-media__thumbnail-caption-wrapper--overlay")})),"bar-outside"===U&&"top"!==Object(m.a)(D,1)&&_&&n.a.createElement("div",{className:r()("uag-image-gallery-media__thumbnail-caption-wrapper","uag-image-gallery-media__thumbnail-caption-wrapper--"+U)},xe(e))),xe=e=>{let a=!!e.caption,t=e.caption?e.caption:e.url?b?F:B:"Unable to load image";if(a&&e.caption.length<=G)a=!1;else if(a)switch(t=t.substr(0,G),-1===t.lastIndexOf(" ")?-1===e.caption.lastIndexOf(" ")?t.length===e.caption.split(" ")[0].length?a=!1:t="":t.length!==e.caption.split(" ")[0].length&&(t=""):t.length===e.caption.length?a=!1:" "!==e.caption.charAt(t.length)&&(t=t.substr(0,Math.min(t.length,t.lastIndexOf(" ")))),t.charAt(t.length-1)){case",":case".":case" ":case"'":t=t.slice(0,t.length-1)}return n.a.createElement("div",{className:r()("uag-image-gallery-media__thumbnail-caption","uag-image-gallery-media__thumbnail-caption--"+U)},`${Object(g.__)(t,"ultimate-addons-for-gutenberg")}${a?" ...":""}`)};return u?n.a.createElement("div",{className:"uag-image-gallery__iso-ref-wrapper",ref:ye},(()=>{switch(d){case"grid":const e="grid";return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:r()("uag-image-gallery","uag-image-gallery__layout--"+e,`uag-image-gallery__layout--${e}-col-${ge}`,`uag-image-gallery__layout--${e}-col-tab-${oe}`,`uag-image-gallery__layout--${e}-col-mob-${ce}`)},Oe()),ae&&n.a.createElement("div",{className:r()("uag-image-gallery__control-wrapper")},n.a.createElement(ve,null),n.a.createElement("ul",{className:r()("uag-image-gallery__control-dots")},[...Array(Y)].map((e,a)=>n.a.createElement("li",{key:a,className:r()("uag-image-gallery__control-dot",{"uag-image-gallery__control-dot--active":a===Z-1}),"data-go-to":a+1},n.a.createElement("button",{onClick:()=>t({gridPageNumber:a+1})})))),n.a.createElement(we,null)));case"masonry":return n.a.createElement(n.a.Fragment,null,n.a.createElement(p.a,{className:r()("uag-image-gallery","uag-image-gallery__layout--"+d,`uag-image-gallery__layout--${d}-col-${ge}`,`uag-image-gallery__layout--${d}-col-tab-${oe}`,`uag-image-gallery__layout--${d}-col-mob-${ce}`),updateOnEachImageLoad:!0},Oe()),ae&&n.a.createElement(n.a.Fragment,null,re?n.a.createElement("div",{className:"uag-image-gallery__control-loader"},n.a.createElement("div",{className:"uag-image-gallery__control-loader--1"}),n.a.createElement("div",{className:"uag-image-gallery__control-loader--2"}),n.a.createElement("div",{className:"uag-image-gallery__control-loader--3"})):n.a.createElement("div",{className:"uag-image-gallery__control-wrapper"},n.a.createElement("div",{className:r()("uag-image-gallery__control-button"),"aria-label":Object(g.__)(ne,"ultimate-addons-for-gutenberg"),tabIndex:"0"},Object(g.__)(ne,"ultimate-addons-for-gutenberg")))));case"tiled":return n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:r()("uag-image-gallery","uag-image-gallery__layout--"+d,`uag-image-gallery__layout--${d}-col-${ge}`,`uag-image-gallery__layout--${d}-col-tab-${oe}`,`uag-image-gallery__layout--${d}-col-mob-${ce}`)},n.a.createElement("div",{className:"uag-image-gallery-media-spacer",ref:_e}),Oe()));case"carousel":return n.a.createElement("div",{className:r()("uag-image-gallery","uag-image-gallery__layout--"+d),ref:be,style:{"margin-bottom":ue+"px"}},n.a.createElement(y.a,f({className:r()("uagb-slick-carousel")},Ee),Oe()))}})()):n.a.createElement("div",{className:"uag-image-gallery-init-wrapper"},s.a.image_gallery,n.a.createElement("h3",null,Object(g.__)("Spectra - Image Gallery","ultimate-addons-for-gutenberg")),n.a.createElement("p",null,Object(g.__)("No images to display...","ultimate-addons-for-gutenberg")))},E=t(10),N=t(16),M=t.n(N),O=t(454),k=0,j={injectType:"lazySingletonStyleTag",attributes:{id:"uagb-editor-styles"},insert:"head",singleton:!0},x={};x.locals=O.a.locals||{},x.use=function(){return k++||(w=M()(O.a,j)),x},x.unuse=function(){k>0&&!--k&&(w(),w=null)};var L=x;const S=e=>{Object(i.useLayoutEffect)(()=>(L.use(),()=>{L.unuse()}),[]),e=e.parentProps;const{attributes:a,setAttributes:t,className:l}=e,{block_id:g,readyToRender:o,isPreview:c}=a,s=Object(E.a)(),m=uagb_blocks_info.uagb_url+"/admin/assets/preview-images/image-gallery.svg";return n.a.createElement(n.a.Fragment,null,c?n.a.createElement("img",{width:"100%",src:m,alt:""}):n.a.createElement("div",{className:r()(l,"uagb-editor-preview-mode-"+s.toLowerCase(),"uagb-block-"+g)},o?n.a.createElement(v,{attributes:a,setAttributes:t,block_id:g}):n.a.createElement(u,{attributes:a,setAttributes:t})))};a.default=n.a.memo(S)}}]);